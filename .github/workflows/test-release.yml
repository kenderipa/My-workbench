name: Test tag
concurrency:
  group: build-${{ github.ref }}
  cancel-in-progress: true

on: 
  workflow_dispatch:

jobs:
  build:
    name: Release
    runs-on: ubuntu-latest
    steps:
      - name: Get current release tag
        id: tag
        run: echo "::set-output name=tag::$(wget -q https://api.github.com/repos/ivan-hc/AM-Application-Manager/releases/latest -O - | grep tag_name | cut -d '"' -f 4)"
      - name: Checkout branch "master"
        uses: actions/checkout@v2
        with:
          ref: 'master'
      - name: Release snapshot
        id: release-snapshot
        uses: actions/create-release@latest
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ steps.tag.outputs.date }}
          release_name: ${{ steps.tag.outputs.date }}
          draft: false
          prerelease: false
